Index: rdma-core/ib2roce/beacon.c
===================================================================
--- rdma-core.orig/ib2roce/beacon.c
+++ rdma-core/ib2roce/beacon.c
@@ -140,7 +140,7 @@ static void enable_bridge(struct bridge_
 	/* Create new MC channels */
 	for (i = 0; i < NR_INTERFACES; i++) {
 		/* XXX Needs to be fixed to support multiple rdma channels */
-		b->channels[i]->c[0] = new_rdma_channel(i2r + i, channel_rdmacm, "beacon");
+		b->channels[i]->c[0] = new_rdma_channel(i2r + i, channel_rdmacm, 0);
 	}
 
 
Index: rdma-core/ib2roce/CMakeLists.txt
===================================================================
--- rdma-core.orig/ib2roce/CMakeLists.txt
+++ rdma-core/ib2roce/CMakeLists.txt
@@ -16,6 +16,7 @@ rdma_sbin_executable(ib2roce
   interfaces.c
   cli.c
   pgm.c
+  beacon.c
 )
 target_link_libraries(ib2roce LINK_PRIVATE
   ibverbs
Index: rdma-core/ib2roce/sched.h
===================================================================
--- rdma-core.orig/ib2roce/sched.h
+++ rdma-core/ib2roce/sched.h
@@ -38,6 +38,7 @@
  */
 
 #define _GNU_SOURCE
+#define BEACON
 
 #include <stdint.h>
 #include <sys/types.h>
